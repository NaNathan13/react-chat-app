(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{295:function(e,a,t){e.exports=t(517)},303:function(e,a,t){},517:function(e,a,t){"use strict";t.r(a);var n=t(18),r=t(19),s=t(21),l=t(20),o=t(22),c=t(0),i=t.n(c),u=t(76),d=t.n(u),m=t(541),h=(t(303),t(65)),p=t(539),g=t(537),f=t(527),E=t(519),v=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(p.a,{as:g.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin"},i.a.createElement(f.a,null),i.a.createElement(E.a,{icon:"add",size:"small",color:"blue"}))}}]),a}(i.a.Component),b=t(178),C=t.n(b);t(447),t(449),t(518);C.a.initializeApp({apiKey:"AIzaSyAO8JkH3T_-Ep75f1WRZVyQq2o1jyzpigs",authDomain:"react-slack-clone-cbdc8.firebaseapp.com",databaseURL:"https://react-slack-clone-cbdc8.firebaseio.com",projectId:"react-slack-clone-cbdc8",storageBucket:"react-slack-clone-cbdc8.appspot.com",messagingSenderId:"654671405148"});var y=C.a,j=t(542),O=t(66),w=t(535),k=t(284),S=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={user:t.props.currentUser},t.dropdownOptions=function(){return[{key:"user",text:i.a.createElement("span",null,"Signed in as ",i.a.createElement("strong",null,t.state.user.displayName)),disabled:!0},{key:"avatar",text:i.a.createElement("span",null,"Change Avatar")},{key:"signout",text:i.a.createElement("span",{onClick:t.handleSignout},"Sign Out")}]},t.handleSignout=function(){y.auth().signOut().then(function(){return console.log("signed out!")})},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.state.user;return i.a.createElement(m.a,{style:{background:"#4c3c4c"}},i.a.createElement(m.a.Column,null,i.a.createElement(m.a.Row,{style:{padding:"1.2em",margin:0}},i.a.createElement(j.a,{inverted:!0,floated:"left",as:"h2"},i.a.createElement(O.a,{name:"code"}),i.a.createElement(j.a.Content,null,"Project ChatApp")),i.a.createElement(j.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},i.a.createElement(w.a,{trigger:i.a.createElement("span",null,i.a.createElement(k.a,{src:e.photoURL,spaced:"right",avatar:!0}),e.displayName),options:this.dropdownOptions()})))))}}]),a}(i.a.Component),A=t(38),U=t(533),L=t(532),N=t(528),R=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={activeChannel:"",user:t.props.currentUser,channels:[],channelName:"",channelDetails:"",channelsRef:y.database().ref("channels"),modal:!1,firstLoad:!0},t.addListeners=function(){var e=[];t.state.channelsRef.on("child_added",function(a){e.push(a.val()),t.setState({channels:e},function(){return t.setFirstChannel()})})},t.removeListeners=function(){t.state.channelsRef.off()},t.setFirstChannel=function(){var e=t.state.channels[0];t.state.firstLoad&&t.state.channels.length>0&&(t.props.setCurrentChannel(e),t.setActiveChannel(e)),t.setState({firstLoad:!1})},t.addChannel=function(){var e=t.state,a=e.channelsRef,n=e.channelName,r=e.channelDetails,s=e.user,l=a.push().key,o={id:l,name:n,details:r,createdBy:{name:s.displayName,avatar:s.photoURL}};a.child(l).update(o).then(function(){t.setState({channelName:"",channelDetails:""}),t.closeModal(),console.log("channel added")}).catch(function(e){console.error(e)})},t.handleSubmit=function(e){e.preventDefault(),t.isFormValid(t.state)&&t.addChannel()},t.handleChange=function(e){t.setState(Object(A.a)({},e.target.name,e.target.value))},t.changeChannel=function(e){t.setActiveChannel(e),t.props.setCurrentChannel(e)},t.setActiveChannel=function(e){t.setState({activeChannel:e.id})},t.displayChannels=function(e){return e.length>0&&e.map(function(e){return i.a.createElement(g.a.Item,{key:e.id,onClick:function(){return t.changeChannel(e)},name:e.name,style:{opacity:.7},active:e.id===t.state.activeChannel},"# ",e.name)})},t.isFormValid=function(e){var a=e.channelName,t=e.channelDetails;return a&&t},t.openModal=function(){return t.setState({modal:!0})},t.closeModal=function(){return t.setState({modal:!1})},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,a=e.channels,t=e.modal;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a.Menu,{style:{paddingBottom:"2em"}},i.a.createElement(g.a.Item,null,i.a.createElement("span",null,i.a.createElement(O.a,{name:"exchange"})," CHANNELS")," ","(",a.length,") ",i.a.createElement(O.a,{name:"add",onClick:this.openModal})),this.displayChannels(a)),i.a.createElement(U.a,{basic:!0,open:t,onClose:this.closeModal},i.a.createElement(U.a.Header,null,"Add a Channel"),i.a.createElement(U.a.Content,null,i.a.createElement(L.a,{onSubmit:this.handleSubmit},i.a.createElement(L.a.Field,null,i.a.createElement(N.a,{fluid:!0,label:"Name of Channel",name:"channelName",onChange:this.handleChange})),i.a.createElement(L.a.Field,null,i.a.createElement(N.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:this.handleChange})))),i.a.createElement(U.a.Actions,null,i.a.createElement(E.a,{color:"green",inverted:!0,onClick:this.handleSubmit},i.a.createElement(O.a,{name:"checkmark"})," Add"),i.a.createElement(E.a,{color:"red",inverted:!0,onClick:this.closeModal},i.a.createElement(O.a,{name:"remove"})," Cancel"))))}}]),a}(i.a.Component),M=Object(h.b)(null,{setCurrentChannel:function(e){return{type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}}}})(R),P=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentUser;return i.a.createElement(g.a,{size:"small",inverted:!0,fixed:"left",vertical:!0,style:{background:"#4c3c4c",fontSize:"1.2rem"}},i.a.createElement(S,{currentUser:e}),i.a.createElement(M,{currentUser:e}))}}]),a}(i.a.Component),I=t(546),x=t(534),F=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(I.a,{clearing:!0},i.a.createElement(j.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0}},i.a.createElement("span",null,"Channel",i.a.createElement(O.a,{name:"star outline",color:"black"})),i.a.createElement(j.a.Subheader,null,"2 Users")),i.a.createElement(j.a,{floated:"right"},i.a.createElement(N.a,{size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),a}(i.a.Component),_=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={message:"",channel:t.props.currentChannel,user:t.props.currentUser,loading:!1,errors:[]},t.handleChange=function(e){t.setState(Object(A.a)({},e.target.name,e.target.value))},t.createMessage=function(){return{timestamp:y.database.ServerValue.TIMESTAMP,user:{id:t.state.user.uid,name:t.state.user.displayName,avatar:t.state.user.photoURL},content:t.state.message}},t.sendMessage=function(){var e=t.props.messagesRef,a=t.state,n=a.message,r=a.channel;n?(t.setState({loading:!0}),e.child(r.id).push().set(t.createMessage()).then(function(){t.setState({loading:!1,message:"",errors:[]})}).catch(function(e){console.error(e),t.setState({loading:!1,errors:t.state.errors.concat(e)})})):t.setState({errors:t.state.errors.concat({message:"Add a message"})})},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.state,a=e.errors,t=e.message,n=e.loading;return i.a.createElement(I.a,{className:"message__form"},i.a.createElement(N.a,{fluid:!0,name:"message",onChange:this.handleChange,value:t,style:{marginBottom:"0.7em"},label:i.a.createElement(E.a,{icon:"add"}),labelPosition:"left",className:a.some(function(e){return e.message.includes("message")})?"error":"",placeholder:"Write your message"}),i.a.createElement(E.a.Group,{icon:!0,widths:"2"},i.a.createElement(E.a,{onClick:this.sendMessage,disabled:n,color:"orange",content:"Add Reply",labelPosition:"left",icon:"edit"}),i.a.createElement(E.a,{color:"teal",content:"Upload Media",labelPosition:"right",icon:"cloud upload"})))}}]),a}(i.a.Component),D=t(280),T=t.n(D),W=function(e,a){return e.user.id===a.uid?"message__self":""},z=function(e){var a,t=e.message,n=e.user;return i.a.createElement(x.a,null,i.a.createElement(x.a.Avatar,{src:t.user.avatar}),i.a.createElement(x.a.Content,{className:W(t,n)},i.a.createElement(x.a.Author,{as:"a"},t.user.name),i.a.createElement(x.a.Metadata,null,(a=t.timestamp,T()(a).fromNow())),i.a.createElement(x.a.Text,null,t.content)))},V=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={messagesRef:y.database().ref("messages"),messages:[],messagesLoading:!0,channel:t.props.currentChannel,user:t.props.currentUser},t.addListeners=function(e){t.addMessageListener(e)},t.addMessageListener=function(e){var a=[];t.state.messagesRef.child(e).on("child_added",function(e){a.push(e.val()),t.setState({messages:a,messagesLoading:!1})})},t.displayMessages=function(e){return e.length>0&&e.map(function(e){return i.a.createElement(z,{key:e.timestamp,message:e,user:t.state.user})})},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.channel,t=e.user;a&&t&&this.addListeners(a.id)}},{key:"render",value:function(){var e=this.state,a=e.messagesRef,t=e.messages,n=e.channel,r=e.user;return i.a.createElement(i.a.Fragment,null,i.a.createElement(F,null),i.a.createElement(I.a,null,i.a.createElement(x.a.Group,{className:"messages"},this.displayMessages(t))),i.a.createElement(_,{messagesRef:a,currentChannel:n,currentUser:r}))}}]),a}(i.a.Component),B=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,"MetaPanel")}}]),a}(i.a.Component),H=Object(h.b)(function(e){return{currentUser:e.user.currentUser,currentChannel:e.channel.currentChannel}})(function(e){var a=e.currentUser,t=e.currentChannel;return i.a.createElement(m.a,{columns:"equal",className:"app",style:{background:"#eee"}},i.a.createElement(v,null),i.a.createElement(P,{key:a&&a.uid,currentUser:a}),i.a.createElement(m.a.Column,{style:{marginLeft:320}},i.a.createElement(V,{key:t&&t.id,currentChannel:t,currentUser:a})),i.a.createElement(m.a.Column,{width:4},i.a.createElement(B,null)))}),J=t(536),q=t(529),G=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={email:"",password:"",errors:[],loading:!1},t.displayErrors=function(e){return e.map(function(e,a){return i.a.createElement("p",{key:a},e.message)})},t.handleChange=function(e){t.setState(Object(A.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.isFormValid(t.state)&&(t.setState({errors:[],loading:!0}),y.auth().signInWithEmailAndPassword(t.state.email,t.state.password).then(function(e){console.log(e)}).catch(function(e){console.error(e),t.setState({errors:t.state.errors.concat(e),loading:!1})}))},t.isFormValid=function(e){var a=e.email,t=e.password;return a&&t},t.handleInputError=function(e,a){return e.some(function(e){return e.message.toLowerCase().includes(a)})?"error":""},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.state,a=e.email,t=e.password,n=e.errors,r=e.loading;return i.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",className:"app"},i.a.createElement(m.a.Column,{style:{maxWidth:450}},i.a.createElement(j.a,{as:"h1",icon:!0,color:"violet",textAlign:"center"},"Login to Project ChatApp"),i.a.createElement(L.a,{onSubmit:this.handleSubmit,size:"large"},i.a.createElement(I.a,{stacked:!0},i.a.createElement(L.a.Input,{fluid:!0,name:"email",placeholder:"Email Address",onChange:this.handleChange,value:a,className:this.handleInputError(n,"email"),type:"email"}),i.a.createElement(L.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:t,className:this.handleInputError(n,"password"),type:"password"}),i.a.createElement(E.a,{disabled:r,className:r?"loading":"",color:"violet",fluid:!0,size:"large"},"Submit"))),n.length>0&&i.a.createElement(J.a,{error:!0},i.a.createElement("h3",null,"Error"),this.displayErrors(n)),i.a.createElement(J.a,null,"Don't have an account? ",i.a.createElement(q.a,{to:"/register"},"Register"))))}}]),a}(i.a.Component),Q=t(281),K=t.n(Q),Z=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).state={username:"",email:"",password:"",passwordConfirmation:"",errors:[],loading:!1,usersRef:y.database().ref("users")},t.isFormValid=function(){var e,a=[];return t.isFormEmpty(t.state)?(e={message:"Fill in all fields"},t.setState({errors:a.concat(e)}),!1):!!t.isPasswordValid(t.state)||(e={message:"Password is invalid"},t.setState({errors:a.concat(e)}),!1)},t.isFormEmpty=function(e){var a=e.username,t=e.email,n=e.password,r=e.passwordConfirmation;return!a.length||!t.length||!n.length||!r.length},t.isPasswordValid=function(e){var a=e.password,t=e.passwordConfirmation;return!(a.length<6||t.length<6)&&a===t},t.displayErrors=function(e){return e.map(function(e,a){return i.a.createElement("p",{key:a},e.message)})},t.handleChange=function(e){t.setState(Object(A.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.isFormValid()&&(t.setState({errors:[],loading:!0}),y.auth().createUserWithEmailAndPassword(t.state.email,t.state.password).then(function(e){console.log(e),e.user.updateProfile({displayName:t.state.username,photoURL:"http://gravatar.com/avatar/".concat(K()(e.user.email),"?d=identicon")}).then(function(){t.saveUser(e).then(function(){console.log("user saved")})}).catch(function(e){console.error(e),t.setState({errors:t.state.errors.concat(e),loading:!1})})}).catch(function(e){console.error(e),t.setState({errors:t.state.errors.concat(e),loading:!1})}))},t.saveUser=function(e){return t.state.usersRef.child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL})},t.handleInputError=function(e,a){return e.some(function(e){return e.message.toLowerCase().includes(a)})?"error":""},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.state,a=e.username,t=e.email,n=e.password,r=e.passwordConfirmation,s=e.errors,l=e.loading;return i.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",className:"app"},i.a.createElement(m.a.Column,{style:{maxWidth:450}},i.a.createElement(j.a,{as:"h1",icon:!0,color:"orange",textAlign:"center"},"Register for Project ChatApp"),i.a.createElement(L.a,{onSubmit:this.handleSubmit,size:"large"},i.a.createElement(I.a,{stacked:!0},i.a.createElement(L.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:a,type:"text"}),i.a.createElement(L.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:t,className:this.handleInputError(s,"email"),type:"email"}),i.a.createElement(L.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:n,className:this.handleInputError(s,"password"),type:"password"}),i.a.createElement(L.a.Input,{fluid:!0,name:"passwordConfirmation",icon:"repeat",iconPosition:"left",placeholder:"Password Confirmation",onChange:this.handleChange,value:r,className:this.handleInputError(s,"password"),type:"password"}),i.a.createElement(E.a,{disabled:l,className:l?"loading":"",color:"orange",fluid:!0,size:"large"},"Submit"))),s.length>0&&i.a.createElement(J.a,{error:!0},i.a.createElement("h3",null,"Error"),this.displayErrors(s)),i.a.createElement(J.a,null,"Already a user? ",i.a.createElement(q.a,{to:"/login"},"Login"))))}}]),a}(i.a.Component),$=t(540),X=t(530),Y=function(){return i.a.createElement($.a,{active:!0},i.a.createElement(X.a,{size:"huge",content:"Preparing Chat..."}))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}t(515);var te=t(543),ne=t(531),re=t(544),se=t(538),le=t(63),oe=t(282),ce=t(181),ie={currentUser:null,isLoading:!0},ue={currentChannel:null},de=Object(le.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return{currentUser:a.payload.currentUser,isLoading:!1};case"CLEAR_USER":return Object(ce.a)({},e,{isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_CHANNEL":return Object(ce.a)({},e,{currentChannel:a.payload.currentChannel});default:return e}}}),me=Object(le.createStore)(de,Object(oe.composeWithDevTools)()),he=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.auth().onAuthStateChanged(function(a){a?(e.props.setUser(a),e.props.history.push("/")):(e.props.history.push("/login"),e.props.clearUser())})}},{key:"render",value:function(){return this.props.isLoading?i.a.createElement(Y,null):i.a.createElement(te.a,null,i.a.createElement(ne.a,{exact:!0,path:"/",component:H}),i.a.createElement(ne.a,{path:"/login",component:G}),i.a.createElement(ne.a,{path:"/register",component:Z}))}}]),a}(i.a.Component),pe=Object(re.a)(Object(h.b)(function(e){return{isLoading:e.user.isLoading}},{setUser:function(e){return{type:"SET_USER",payload:{currentUser:e}}},clearUser:function(){return{type:"CLEAR_USER"}}})(he));d.a.render(i.a.createElement(h.a,{store:me},i.a.createElement(se.a,null,i.a.createElement(pe,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-chat-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-chat-app","/service-worker.js");ee?(function(e){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ae(e)})}}()}},[[295,1,2]]]);
//# sourceMappingURL=main.17de84aa.chunk.js.map